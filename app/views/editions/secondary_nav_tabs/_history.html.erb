<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render "govuk_publishing_components/components/inset_text", {
      text: sanitize("Send fact check responses to #{mail_to resource.fact_check_email_address} and include [#{resource.id}] in the subject line."),
    } %>

    <%= render "govuk_publishing_components/components/heading", {
      text: "History and notes",
    } %>

    <%= render "govuk_publishing_components/components/accordion", {
      data_attributes: {
        module: "HistoryAndNotes",
        "toggle-show-text": "Show earlier messages",
        "toggle-hide-text": "Hide earlier messages",
      },
      items: @resource.history.map do |edition|
        {
          heading: {
            text: "Edition #{edition.version_number}",
          },
          content: {
            html: (render "govuk_publishing_components/components/list", {
              items: action_items(edition, @update_events),
            }),
          },
        }
      end,
    } %>
  </div>

  <div class="govuk-grid-column-one-third options-sidebar">
    <div class="sidebar-components">
      <%= sidebar_options_heading %>

      <%= render "govuk_publishing_components/components/list", {
        items: [
          (render "govuk_publishing_components/components/button", {
            text: "Add edition note",
            margin_bottom: 3,
            href: history_add_edition_note_edition_path,
          }),
          (render "govuk_publishing_components/components/button", {
            text: "Update important note",
            margin_bottom: 3,
            secondary_solid: true,
            href: history_update_important_note_edition_path,
          }),
        ],
      } %>
    </div>
  </div>
</div>
