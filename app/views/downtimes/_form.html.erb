<%= f.hidden_field :artefact_id %>

<%= render partial: "downtimes/datetime_fields", locals: {
  date_legend_text: "From date",
  time_legend_text: "From time",
  error_items: errors_for(f.object.errors, :start_time),
  year: {
    name: "downtime[start_time(1i)]",
    label: "Year",
    value: params.dig("downtime", "start_time(1i)") || @downtime.start_time&.year,
    width: 4,
  },
  month: {
    name: "downtime[start_time(2i)]",
    label: "Month",
    value: params.dig("downtime", "start_time(2i)") || @downtime.start_time&.month,
    width: 2,
  },
  day: {
    id: "downtime_start_time",
    name: "downtime[start_time(3i)]",
    label: "Day",
    value: params.dig("downtime", "start_time(3i)") || @downtime.start_time&.day,
    width: 2,
  },
  hour: {
    name: "downtime[start_time(4i)]",
    label: "Hour",
    value: params.dig("downtime", "start_time(4i)") || @downtime.start_time&.hour,
    width: 2,
  },
  minute: {
    name: "downtime[start_time(5i)]",
    label: "Minute",
    value: params.dig("downtime", "start_time(5i)") || @downtime.start_time&.minute,
    width: 2,
  },
} %>

<%= render partial: "downtimes/datetime_fields", locals: {
  date_legend_text: "To date",
  time_legend_text: "To time",
  error_items: errors_for(f.object.errors, :end_time),
  year: {
    name: "downtime[end_time(1i)]",
    label: "Year",
    value: params.dig("downtime", "end_time(1i)") || @downtime.end_time&.year,
    width: 4,
  },
  month: {
    name: "downtime[end_time(2i)]",
    label: "Month",
    value: params.dig("downtime", "end_time(2i)") || @downtime.end_time&.month,
    width: 2,
  },
  day: {
    id: "downtime_end_time",
    name: "downtime[end_time(3i)]",
    label: "Day",
    value: params.dig("downtime", "end_time(3i)") || @downtime.end_time&.day,
    width: 2,
  },
  hour: {
    name: "downtime[end_time(4i)]",
    label: "Hour",
    value: params.dig("downtime", "end_time(4i)") || @downtime.end_time&.hour,
    width: 2,
  },
  minute: {
    name: "downtime[end_time(5i)]",
    label: "Minute",
    value: params.dig("downtime", "end_time(5i)") || @downtime.end_time&.minute,
    width: 2,
  },
} %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/textarea", {
      margin_bottom: 8,
      label: {
        heading_size: "l",
        text: "Message"
      },
      hint: "Message is auto-generated once a schedule has been made.",
      id: "downtime_message",
      name: "downtime[message]",
      value: params.dig("downtime", "message") || @downtime.message,
      error_items: errors_for(f.object.errors, :message),
    } %>
  </div>
</div>
